!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports=function(){"use strict";var e=function(){var t=0,n=document.createElement("div");function o(e){return n.appendChild(e.dom),e}function i(e){for(var o=0;o<n.children.length;o++)n.children[o].style.display=o===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",function(e){e.preventDefault(),i(++t%n.children.length)},!1);var r=(performance||Date).now(),l=r,a=0,c=o(new e.Panel("FPS","#0ff","#002")),u=o(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=o(new e.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:n,addPanel:o,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(u.update(e-r,200),l+1e3<=e&&(c.update(1e3*a/(e-l),100),l=e,a=0,f)){var t=performance.memory;f.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:n,setMode:i}};return e.Panel=function(e,t,n){var o=1/0,i=0,r=Math.round,l=r(window.devicePixelRatio||1),a=80*l,c=48*l,u=3*l,f=2*l,d=3*l,s=15*l,m=74*l,E=30*l,h=document.createElement("canvas");h.width=a,h.height=c,h.style.cssText="width:80px;height:48px";var R=h.getContext("2d");return R.font="bold "+9*l+"px Helvetica,Arial,sans-serif",R.textBaseline="top",R.fillStyle=n,R.fillRect(0,0,a,c),R.fillStyle=t,R.fillText(e,u,f),R.fillRect(d,s,m,E),R.fillStyle=n,R.globalAlpha=.9,R.fillRect(d,s,m,E),{dom:h,update:function(c,g){o=Math.min(o,c),i=Math.max(i,c),R.fillStyle=n,R.globalAlpha=1,R.fillRect(0,0,a,s),R.fillStyle=t,R.fillText(r(c)+" "+e+" ("+r(o)+"-"+r(i)+")",u,f),R.drawImage(h,d+l,s,m-l,E,d,s,m-l,E),R.fillRect(d+m-l,s,l,E),R.fillStyle=n,R.globalAlpha=.9,R.fillRect(d+m-l,s,l,r((1-c/g)*E))}}},e}()},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r="#version 300 es\nprecision mediump float;\n\nin vec3 position;\n\nvoid main() {\n    gl_Position = vec4(position, 1.0);\n}",l="#version 300 es\nprecision mediump float;\n\nuniform vec2 resolution;\nuniform float time;\n\nuniform sampler2D u_image;\n\nout vec4 fragColor;\n\nvoid main() {\n\n    vec2 uv = gl_FragCoord.xy / resolution;\n    uv = 1.0 - uv;\n\n    vec3 col = vec3(0);\n    for (int i = -1; i <= 1; i++) {\n        for (int j = -1; j <= 1; j++) {\n            vec2 off = vec2(i, j) / resolution;\n            col +=  texture(u_image, uv + off).rgb;\n        }   \n    }\n    col /= 9.;\n    \n    vec3 cof = vec3(0.2126, 0.7156, 0.0722);\n    float lum = dot(cof, col);\n\n    col = 0.5 + 0.5 * cos(time + lum * 10.0 + vec3(33, 66, 99));\n\n    vec3 _col;\n    _col.r += texture(u_image, uv + vec2(0.05 * sin(time / 20. + floor(uv.y * 100.)), 0.0)).r;\n    _col.g += texture(u_image, uv + vec2(0.08 * sin(time / 10. + floor(uv.x  * 10. + uv.y * 10.)), 0.0)).g;\n    _col.b += texture(u_image, uv + vec2(0.09 * sin(time  / 20. + floor(uv.y * 10.)), 0.0)).b;\n    \n    _col = mix(_col, .5 + .5 * cos(col * 10. + vec3(0, 12, 24)), .5 + .5 * cos(time + floor(10. * uv.x)));\n\n    col = mix(col, _col, .5 + .5 * cos(uv.x + time / 10.));\n\n    \n    fragColor = vec4(col, 1);\n\n}";let a,c,u,f,d,s,m,E,h,R,g,p,v,S,T,_,A;function y(){A=new i.a,document.body.appendChild(A.dom),a=document.getElementById("canvas"),c=a.getContext("webgl2"),u=640,f=480,a.width=u,a.height=f,a.style.width=u,a.style.height=f,a.style.background="grey",s=c.createShader(c.VERTEX_SHADER),m=c.createShader(c.FRAGMENT_SHADER),c.shaderSource(s,r),c.shaderSource(m,l),c.compileShader(s,c.VERTEX_SHADER),c.getShaderParameter(s,c.COMPILE_STATUS)?console.log("SUCCESS: VERTEX SHADER"):(console.log("ERROR: VERTEX SHADER"),console.log(c.getShaderInfoLog(s))),c.compileShader(m,c.FRAGMENT_SHADER),c.getShaderParameter(m,c.COMPILE_STATUS)?console.log("SUCCESS: FRAGMENT SHADER"):(console.log("ERROR: FRAGMENT SHADER"),console.log(c.getShaderInfoLog(m))),d=c.createProgram(),c.attachShader(d,s),c.attachShader(d,m),c.linkProgram(d),c.getProgramParameter(d,c.LINK_STATUS)?console.log("SUCCESS: LINKING SHADER"):(console.log("ERROR: LINKING SHADER"),console.log(c.getShaderInfoLog(m))),E=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],h=[0,1,2,0,2,3],R=c.createBuffer(c.ARRAY_BUFFER),g=c.createBuffer(c.ELEMENT_ARRAY_BUFFER),v=0,(S=function(e=640,t=480){let n=document.createElement("video");document.body.appendChild(n),n.width=e,n.height=t;const o=e=>{console.log("ERROR: Video")};let i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e,i.style.height=t,i.id="video-pixel-buffer",i.style.display="none",document.body.appendChild(i);let r=i.getContext("2d");return{elt:n,width:e,height:t,buffer:{canvas:i,ctx:r},setup(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:{width:{min:e},height:{min:t}}}).then(e=>{this.elt.srcObject=e},o),this.hide()},hide(){this.elt.style.display="none"},play(){this.elt.play()},update(){this.buffer.ctx.fillStyle="red",this.buffer.ctx.fillRect(0,0,this.width,this.height),this.buffer.ctx.drawImage(this.elt,0,0,this.width,this.height)},data(){return this.buffer.ctx.getImageData(0,0,this.elt.width,this.elt.height)}}}()).setup(),S.play(),_=c.createTexture()}function x(){requestAnimationFrame(x),A.update(),S.update(),T=S.data(),v+=.1,c.viewport(0,0,u,f),c.clear(c.COLOR_BUFFER_BIT),c.clearColor(1,1,0,1),c.bindBuffer(c.ARRAY_BUFFER,R),c.bufferData(c.ARRAY_BUFFER,new Float32Array(E),c.STATIC_DRAW),p=c.getAttribLocation(d,"position"),c.enableVertexAttribArray(p),c.vertexAttribPointer(d,3,c.FLOAT,!1,0,0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,g),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),c.STATIC_DRAW),c.bindTexture(c.TEXTURE_2D,_),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,T),c.useProgram(d),c.uniform1f(c.getUniformLocation(d,"time"),v),c.uniform2f(c.getUniformLocation(d,"resolution"),u,f),c.drawElements(c.TRIANGLES,h.length,c.UNSIGNED_SHORT,0)}window.addEventListener("load",()=>{y(),x()})}]);